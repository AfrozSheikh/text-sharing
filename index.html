<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Text Share via URL</title>
<style>
  body { font-family: Arial, sans-serif; max-width: 600px; margin: 50px auto; }
  textarea { width: 100%; height: 120px; font-size: 16px; }
  input[type="text"] { width: 80%; padding: 10px; font-size: 16px; }
  button { padding: 10px 15px; font-size: 16px; margin-top: 10px; cursor: pointer; }
  .result { margin-top: 20px; white-space: pre-wrap; background: #f0f0f0; padding: 15px; border-radius: 5px; }
</style>
</head>
<body>

<h2>Simple Text Share via URL</h2>

<div id="input-section">
  <textarea id="text-input" placeholder="Enter text to share"></textarea><br />
  <button id="generate-link">Generate Shareable Link</button>
  <p>Share this link with anyone:</p>
  <input type="text" id="share-link" readonly />
</div>

<hr />

<div id="output-section" style="display:none;">
  <h3>Received Text:</h3>
  <div class="result" id="received-text"></div>
</div>

<script>
  // Encode text to URL-friendly base64
  function encodeText(text) {
    return btoa(encodeURIComponent(text).replace(/%([0-9A-F]{2})/g,
      function(match, p1) {
        return String.fromCharCode('0x' + p1);
      }
    ));
  }

  // Decode base64 back to text
  function decodeText(encoded) {
    try {
      return decodeURIComponent(atob(encoded).split('').map(function(c) {
        return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);
      }).join(''));
    } catch (e) {
      return null;
    }
  }

  document.getElementById('generate-link').onclick = function() {
    const text = document.getElementById('text-input').value.trim();
    if (!text) {
      alert('Please enter some text!');
      return;
    }
    const encoded = encodeText(text);
    const url = window.location.origin + window.location.pathname + '#' + encoded;
    const linkInput = document.getElementById('share-link');
    linkInput.value = url;
    linkInput.select();
    document.execCommand('copy');
    alert('Link copied to clipboard! Share it with anyone.');
  };

  // On page load, check if URL has hash to decode
  window.onload = function() {
    const hash = window.location.hash.substr(1);
    if (hash) {
      const decoded = decodeText(hash);
      if (decoded) {
        document.getElementById('input-section').style.display = 'none';
        document.getElementById('output-section').style.display = 'block';
        document.getElementById('received-text').textContent = decoded;
      }
    }
  };
</script>

</body>
</html>
